# tr命令用法

> tr 命令

## 用途

> 转换字符


## 语法

`tr [ -c | -cds | -cs | -C | -Cds | -Cs | -ds | -s ] [ -A ] String1 String2`

`tr { -cd | -cs | -Cd | -Cs | -d | -s } [ -A ] String1`

## 描述

`tr` 命令从标准输入删除或替换字符，并将结果写入标准输出。
根据由 `String1` 和 `String2` 变量指定的字符串以及指定的标志，tr 命令可执行三种操作。


## 转换字符

+ 如果 `String1` 和 `String2` 两者都已指定，但 `-d` 标志没有指定
    > 替换

    则 `tr` 命令就会从标准输入中将 String1 中所包含的每一个字符都替换成 String2 中相同位置上的字符。


+ 使用 `-d` 标志
    > 删除字符

    如果 -d 标志已经指定，则 tr 命令就会从标准输入中删除 String1 中包含的每一个字符。


+ 用 `-s` 标志 
    > 反向替换序列

    如果 `-s` 标志已经指定，则 `tr` 命令就会除去包含在 `String1` 或 `String2` 中的任何字符串系列中的除第一个字符以外的所有字符。
    

### 表达字符串的特殊序列(重点)

`String1` 和 `String2` 变量中所包含的字符串可以使用以下的约定来表示：


1. `C1-C2`	指定了 `C1` 所指定的字符和 `C2` 所指定的字符之间（包括 `C1` 和 `C2`）进行整理的字符串。
    > C1 所指定的字符必须整理放在由 C2 所指定的字符之前。

2. `[C*Number]	Number` 是一个整数，它指定了由 `C` 所指定的字符的重复次数。
    > 除非其首位数字是 `0`，否则 `Number` 一律视为是十进制整数；如果首位数字是 `0`，则视为八进制整数。

3. `[C*]`	用 `C` 指定的字符填写字符串。
    > 该选项只用于包含在 `String2` 中的字符串末尾，它强制 `String2` 中的字符串具有与由 `String1` 变量所指定的字符串一样的字符数。
    >> `*`（星号）后面指定的任何字符都被忽略。

4. `[ :ClassName: ]` 
    > 指定由当前语言环境中的 `ClassName` 所命名的字符类中的所有字符。

    >> 类名可以是下述名称中的任何一种：

        alnum      lower
        alpha      print
        blank      punct
        cntrl      space
        digit      upper
        graph      xdigit

> 除 `[:lower:] 和 [:upper:]` 转换字符类之外，其它字符类指定的字符都按未指定的顺序放入数组中。
>
> 由于未定义字符类指定的字符的顺序，仅当目的为将多个字符映射为一个时才使用这些字符。
>> 转换字符类除外。

> 有关字符类的详细情况，请参阅 ctype 子例程。

5. `[ =C= ]` 指定所有的字符具有与 `C` 所指定的字符相同的等价类。

    `\Octal	指定字符`，其编码由 `Octal` 所指定的八进制值表示。
    > Octal 可以是 1 位、2 位 或 3 位八进制整数。
    >> 空字符可以用 `\0` 表示，并可以像任何其它的字符那样进行处理。

    `\ControlCharacter`	指定与 `ControlCharacter` 所指定的值相应的控制字符。
    > 可以表示以下值：

        \a  警告
        \b  退格键
        \f  换页
        \n  换行
        \r  回车
        \t  制表键
        \v  垂直制表键
        \\	规定 `\`（反斜杠）就是作反斜杠使用，而无作为转义字符的任何特殊意义。
        \[	指定 `[`（左括号）就作为左括号使用，而无作为特定字符串序列的开始字符的任何特殊意义。
        \-	指定 `-`（负号）就作为负号使用，而无作为范围分隔符的任何特殊意义。

> 如果某个字符在 `String1` 中被指定过多次，则该字符就被转换成 `String2` 中为与 String1 中最后出现的字符相对应的字符。


如果由 `String1` 和 `String2` 指定的字符串长度不相同，则 tr 命令就会忽略较长一个字符串中的多余字符。


## 标志

1. `-A`	使用范围和字符类 ASCII 整理顺序、一个字节一个字节地执行所有操作，而不是使用当前语言环境整理顺序。

2. `-C`	指定 String1 值用 String1 所指定的字符串的补码替换。
    > String1 的补码是当前语言环境的字符集中的所有字符，除了由 String1 指定的字符以外。

    1. 如果指定了 `-A` 和 `-c` 标志都已指定，则与所有 8 位字符代码集合有关的字符将被补足。
    2. 如果指定了 -c 和 -s 标志，则 -s 标志适用于 String1 的补码中的字符。
    3. 如果没有指定 -d 选项，则由 String1 指定的字符的补码将放置到升序排列的数组中（如 LC_COLLATE 的当前设置所定义）。

3. `-c`	指定 String1 值用 String1 所指定的字符串的补码替换。
    1. `String1` 的补码是当前语言环境的字符集中的所有字符，除了由 String1 指定的字符以外。
    2. 如果指定了 -A 和 -c 标志都已指定，则与所有 8 位字符代码集合有关的字符将被补足。
    3. 如果指定了 -c 和 -s 标志，则 -s 标志适用于 String1 的补码中的字符。
如果没有指定 -d 选项，则由 String1 指定的值的补码将放置到通过二进制值升序排列的数组中。

4. `-d` 从标准输入删除包含在由 String1 指定的字符串中的每个字符。

    注:
    1. 当 -C 选项和 -d 选项一起指定时，将删除所有除 String1 指定的那些字符以外的字符。
        > 忽略 String2 的内容，除非也指定了 -s 选项。
    2. 当 -c 选项和 -d 选项一起指定时，将删除所有除 String1 指定的那些字符以外的字符。
        > 忽略 String2 的内容，除非也指定了 -s 选项。

5. `-s` 在重复字符序列中除去除第一个字符以外的所有字符。
    
    将 String1 所指定的字符序列在转换之前从标准输入中除去，并将 String2 所指定的字符序列从标准输出中除去。
    > String1	指定一个字符串。
    >
    > String2	指定一个字符串。

## 退出状态

该命令返回以下出口值：
    
1. `0`	所有输入处理成功。

2. `>0`	产生错误。

