# 常用元件

## AT89C51 单片机的仿真实例

1. 添加元件到元件列表中：
    
    本例要用到的元件有：
    
    `AT89C51`、电阻、发光二极管、反相驱动器、开关、电源及地端子

	> 单击`P`按钮，出现挑选元件对话框电路图的绘制

	将所需元器件加入到对象选择器窗口。   
    `AT89C51、7406、LED-BIBY、RES、SW-SPDT`
    
    1. 将它们添加到元件列表中
    2. 将上述元件添加到原理图编辑区中
    3. 由于可以进行自动标号，先选择主菜单中的工具 实时标注或按`CTRL+N`
    4. 然后，左键选择模型选择工具栏中的图标，添加电源及地端子。
    
    > 注意 : 电阻要编辑阻值、电源选`POWER`、地选`GROUND`
    
2. 按图进行连线。


3. 添加仿真文件

	先右键 AT89C51 再左键，在出现的对话框的在 Program File 中单击 出现文件浏览对话框，找到编译后的十六进制文件，如P1.hex 文件，单击确定，完成添加文件，在 Clock Frequency中把频率改为 11.0592MHz，单击 OK 退出。

	3．仿真

	单击 开始仿真。

	说明：红色代表高电平，兰色代表低电平，灰色代表不确定电平（floaTIng）。 运行时，在 Debug菜单中可以查看单片机的相关资源。

	4、源代码调试

	KeilC与Proteus连接调试

	双击Keil uvision2图标，进入KeilC Vision2集成开发环境，创建一个新项目（Project），并为该项目选定合适的单片机CPU器件（如：Atmel公司的AT89C51）。并为该项目加入Keil C51或ASM51源程序。



	5、单击“Project菜单/Options for Target”选项或者点击工具栏的“option for target”按钮，

	弹出窗口，点击Output将Create HEX File打勾，



	点击“Debug”按钮，出现如图所示页面



	在出现的对话框里在右栏上部的下拉菜单里选中“Proteus VSM Simulator”。并且还要点击一下“Use”前面表明选中的小圆点。

	再点击“Setting”按钮，设置通信接口，在“Host”后面添上“127.0.0.1”，如果使用的不是同一台电脑，则需要在这里添上另一台电脑的IP地址（另一台电脑也应安装Proteus）。在“Port”后面添加“8000”。设置好的情形如图所示，点击“OK”按钮即可。最后将工程编译，进入调试状态，并运行。



	5、Proteus的设置

	进入Proteus的ISIS，鼠标左键点击菜单“Debug”， 选中“Use Remote Debug Monitor”，如图所示。此后，便可实现KeilC与Proteus连接调试。

	6、KeilC与Proteus连接仿真调试

	单击仿真运行开始按钮，我们能清楚地观察到每一个引脚的电平变化，红色代表高电平，蓝色代表低电平。P1口所接的发光二极管循环点亮、P2口所接的发光二极管受开关的控制。

	同样，在KeilC中运行程序，在Proteus中的电路中也可以看到仿真结果。KeilC中运行暂停或遇到断点时，Proteus仿真也暂停，KeilC遇到断点或退出调试或调试完毕时，Proteus仿真也退出。
